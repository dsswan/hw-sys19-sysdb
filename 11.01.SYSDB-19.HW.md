# 11.01. Базы данных, их типы - Лебедев Д.С.

### Задание 1. СУБД
> Кейс
> Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.
> 
> Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?
> 
> 1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.
> 
> 1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?
> 
> 1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.
> 
> 1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?
> 
> 1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.
> 
> 1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?
> 
> 1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.
> 
> 1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?
> 
> 1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?
> 
> *Приведите ответ в свободной форме.*

*Ответ:*  
1.1. Целостность и чёткую структуру данных в настоящее время лучше обеспечивают БД реляционного типа. Их особенностью является надежность и неизменяемость данных, низкий риск потери информации. Это может быть критически важно для работы с бюджетированием, финансами. Для прогнозирования рисков используются аналитические функции этих СУБД.

1.1*. Возможно использование отдельного кэш-сервера Redis. Redis используют как вспомогательную базу данных, которая работает в паре с реляционными СУБД, например, PostgreSQL. Парное использование БД решает проблему быстрой загрузки мелких часто обновляемых объектов и защищает от потерь важных данных.

1.2. Для лендингов и CRM целесообразно использовать NoSQL СУБД, например, MongoDB. Такое решение обеспечивает гибкость и быстродействие, что критически важно для работы с большим количеством данных. MongoDB также обеспечивает возможность горизонтального масштабирования, что позволяет расширять систему по мере необходимости.

1.2*. Вариант с одной NoSQL СУБД возможен. В этом случае целесообразно разделить данные лендингов и CRM по разным коллекциям. Для удобства работы с данными можно использовать ORM (Mongoose, Maraquia и т.п.).

1.3. Возможно применение иерархической СУБД, но рациональнее использовать реляционные СУБД, такие, как PostgreSQL или MySQL. Они обеспечивают простую и понятную структуру данных. Это важно для работы с нормами и правилами, как с четко структурированными данными.

1.3*. Для этой задачи возможно использование существующей реляционной СУБД из задач выше, например, PostgreSQL или MySQL. Для этого можно создать отдельную таблицу или группу таблиц, содержащих данные по корпоративным нормам и правилам.

1.4. Для департамента логистики лучше всего использовать графовую СУБД, такую как Neo4j или OrientDB. Из всех типов баз данных эта является лучшим вариантом в случаях, когда приоритетными являются различные взаимосвязи между данными. Обеспечивается быстрая работа со связями, что критически важно для формирования маршрутов доставки и распределения курьеров.

1.4*. Целесообразно использование отдельной СУБД в связке с СУБД логистов. Используются API или ETL-инструменты для обмена данными между системами.

1.5*. Можно решить все перечисленные задачи, используя одну СУБД, например, PostgreSQL. Она обеспечивает реляционную модель данных для бюджетирования и финансовых отчётов, гибкость и быстродействие для лендингов и CRM, простую структуру для отдела контроля качества и графовую модель для департамента логистики. Однако, использование нескольких СУБД, в зависимости от типов данных и требований к ним, позволит более гибко настроить структуру.


### Задание 2. Транзакции
> 2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.
> 
> 2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?
> 
> *Приведите ответ в свободной форме.*

*Ответ:*  
2.1. Действия, необходимые для успешной транзакции:
- Выбор способа оплаты и ввод суммы пополнения;
- Проверка наличия средств на счету или валидной связанной со счетом банковской карты;
- Блокирование суммы на счету отправителя, равной сумме пополнения;
- Запрос на проведение транзакции в процессинговый центр (платёжный шлюз);
- Прибавление суммы к счёту телефона;
- Вычет суммы со счета отправителя.

2.1*. Отличие одно, в первом пункте пользователь должен настроить автоплатёж.


### Задание 3. SQL vs NoSQL
> 3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.
> 
> 3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.
> 
> *Приведите ответ в свободной форме.*

*Ответ:*  
3.1. Преимущества SQL-систем:
- Жесткие ограничения целостности данных, которые обеспечивают сохранность данных и защиту от ошибок ввода информации.
- Простота и удобство использования, что позволяет быстро и эффективно создавать и изменять базы данных.
- Высокая производительность при работе с относительно небольшими объемами данных.
- Широкое распространение и поддержка SQL-систем, что обеспечивает возможность использования большого количества инструментов и библиотек для работы с базами данных.
- Возможность использования транзакций, что гарантирует целостность данных и защиту от сбоев в работе системы.

3.1.* Преимущества NewSQL систем:
- Высокая производительность и масштабируемость при работе с большими объемами данных.
- Поддержка транзакций и жесткие ограничения целостности данных, что обеспечивает сохранность информации и защиту от ошибок ввода.
- Удобство и простота использования, что позволяет быстро и эффективно создавать и изменять базы данных.
- Возможность горизонтального масштабирования и распределения данных, что позволяет обеспечить высокую доступность и отказоустойчивость системы.
- Поддержка SQL-запросов и возможность интеграции с другими инструментами и библиотеками для работы с базами данных.


### Задание 4. Кластеры
> Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.
> 
> На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?
> 
> *Приведите ответ в свободной форме.*

*Ответ:*  
Главный критерий - необходима СУБД, изначально поддерживающая масштабирование и модель `MapReduce`.
MapReduce - это алгоритм для надежной обработки огромных объемов данных на больших кластерах аппаратного оборудования.
Как вариант, не реляционная СУБД MongoDB реализует собственную модель MapReduce.